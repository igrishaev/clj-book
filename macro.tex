
\def\Plus{\texttt{+}}
\def\Minus{\texttt{-}}

\def\linegap{\vspace{1.25em}}

\def\arr{$\to$\xspace}

\def\circum{\textasciicircum}

\newcommand{\slurp}{\vspace{-1em}}

\newcommand{\coderef}[1]{(строка~#1)\xspace}

\newenvironment{teaser}{\vspace{-3em}\slshape}{\vspace{1em}}

\newcommand{\eng}[1]{(англ.~#1)}

\ifprint
\newcommand{\page}[1]{(с.~\pageref{#1})}
\newcommand{\fig}[1]{(рис.~\ref{#1})}
\newcommand{\lis}[1]{\xspace(листинг~\ref{#1})}
\fi

\ifebook
\newcommand{\page}[1]{\hyperref[#1]{\uline{(с.~\pageref{#1})}}}
\newcommand{\fig}[1]{\hyperref[#1]{\uline{(рис.~\ref{#1})}}}
\newcommand{\lis}[1]{\hyperref[#1]{\uline{(листинг~\ref{#1})}}}
\fi

\ifnarrow
\newcommand{\chart}[1]{\begin{center}\input{#1}\end{center}}
\else
\newcommand{\chart}[1]{\input{#1}}
\fi


\NewDocumentCommand{\pagebreaklarge}{O{4}}{\iflarge\pagebreak[#1]\fi}
\NewDocumentCommand{\pagebreakafive}{O{4}}{\ifafive\pagebreak[#1]\fi}


\newcommand{\noindentnarrow}{\ifnarrow\noindent\fi}

\def\splitter{{\noindent\centering\rule{3cm}{.4pt}\par}}

\def\blank{\clearpage{\pagestyle{empty}\cleardoublepage}}

%% #1 text
%% #2 URL
%% #3 QR label
%% #4 offset
\ifprint
\NewDocumentCommand{\footurl}{ m m O{} o }{%
#1%
\footnote{\StrSubstitute{#2}{https://}{}}%
\marginpar{%
\IfNoValueTF{#4}{}{\vspace{#4}}%
\vspace{-5.5mm}%
\ifthispageodd{\raggedright}{\raggedleft}%
\ifqr\qrcode[height=10mm]{#2}\else\input{qr-frame}\fi%
\\\vspace{1mm}\tiny{#3}\vspace{12mm}}%
}%
\fi

\ifebook
\NewDocumentCommand{\footurl}{ m m O{} O{} }{\href{#2}{\uline{#1}}}
\fi

\newcommand{\smartlink}[2]{%
\ifprint
\texttt{#1}%
\fi
\ifebook
\href{#2}{\uline{#1}}%
\fi
}

\def\EMAILLINK{\smartlink{\EMAIL}{mailto:\EMAIL}}

\def\SITELINK{\smartlink{\DOMAIN}{https://\DOMAIN}}

%% small non-breaking space
%% https://tex.stackexchange.com/questions/76132/
\newcommand{\tuple}[1]{\textlangle\,#1\,\textrangle}

\ifprint
\def\codeindent{0mm}
\fi

\ifebook
\def\codeindent{\parindent}
\fi

\def\mintedsize{\footnotesize}

\newminted[clojure]{clojure}{fontsize=\mintedsize}

\newminted[clojure/lines]{clojure}{linenos, xleftmargin=\codeindent, fontsize=\mintedsize}

\newminted[python/lines]{python}{linenos, xleftmargin=\codeindent, fontsize=\mintedsize}

\newminted[json/lines]{json}{linenos, xleftmargin=\codeindent, fontsize=\mintedsize}

\newminted[json]{json}{fontsize=\mintedsize}

\newminted[yaml]{yaml}{fontsize=\mintedsize}

\newminted[bash]{console}{fontsize=\mintedsize}

\newminted[python]{python}{fontsize=\mintedsize}

\newminted[htmldjango]{htmldjango}{fontsize=\mintedsize}

\newminted[js]{js}{fontsize=\mintedsize}

\newminted[xml]{xml}{fontsize=\mintedsize}

\newminted[diff]{diff}{fontsize=\mintedsize}

\newminted[sql]{sql}{fontsize=\mintedsize}

\newminted[http]{http}{fontsize=\mintedsize}

\newminted[text]{text}{fontsize=\mintedsize}

\newminted[ini]{ini}{fontsize=\mintedsize}

\newenvironment{english}{\begin{otherlanguage}{english}}{\end{otherlanguage}}

\newenvironment{russian}{\begin{otherlanguage}{russian}}{\end{otherlanguage}}

\newcommand{\code}[1]{\texttt{#1}}

\newcommand{\angles}[1]{\textlangle{}#1\textrangle{}}
